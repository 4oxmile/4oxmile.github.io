<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#0D1117" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>SOKOBAN</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎮</text></svg>" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div id="app">

    <!-- ════════════ START SCREEN ════════════ -->
    <div id="start-screen" class="screen">
      <div class="start-logo">
        <div class="game-icon">📦</div>
        <h1 class="title-gradient">SOKOBAN</h1>
        <p class="subtitle">창고지기 퍼즐</p>
      </div>

      <div class="start-buttons">
        <button id="btn-start" class="btn btn-primary">
          <span class="btn-icon">▶</span>
          레벨 선택
        </button>
        <button id="btn-continue" class="btn" style="display:none;">
          <span class="btn-icon">↩</span>
          계속하기
        </button>
      </div>

      <div style="position:absolute;bottom:24px;color:var(--text-muted);font-size:11px;letter-spacing:0.5px;">
        방향키 또는 스와이프로 이동
      </div>
    </div>

    <!-- ════════════ LEVEL SELECT SCREEN ════════════ -->
    <div id="level-select-screen" class="screen hidden">
      <div style="display:flex;align-items:center;gap:12px;width:100%;margin-bottom:4px;">
        <button id="btn-back-start" class="icon-btn" title="뒤로">←</button>
        <h2 class="screen-title">레벨 선택</h2>
      </div>
      <div style="font-size:12px;color:var(--text-muted);width:100%;margin-bottom:16px;">
        ⭐ 클리어한 레벨
      </div>
      <div id="level-grid" class="level-grid"></div>
    </div>

    <!-- ════════════ GAME SCREEN ════════════ -->
    <div id="game-screen" class="screen hidden">
      <div class="game-header">
        <div class="header-left">
          <button id="btn-menu" class="icon-btn" title="메뉴">☰</button>
          <div>
            <div class="level-label">LEVEL</div>
            <div class="level-number" id="current-level-num">1</div>
          </div>
        </div>

        <div class="move-display">
          <div class="move-count" id="move-count">0</div>
          <div class="move-label">이동수</div>
        </div>

        <div class="header-right" style="flex-direction:column;align-items:flex-end;gap:2px;">
          <div style="display:flex;gap:4px;">
            <span class="best-label">최고</span>
            <span class="best-value" id="best-value">-</span>
          </div>
          <div style="display:flex;gap:6px;">
            <button id="btn-undo" class="icon-btn" title="되돌리기 (Z)">↩</button>
            <button id="btn-restart" class="icon-btn" title="재시작 (R)">↺</button>
          </div>
        </div>
      </div>

      <div id="board-wrapper">
        <canvas id="game-canvas"></canvas>
      </div>

      <div class="dpad-container">
        <div class="dpad-row">
          <div class="dpad-spacer"></div>
          <button id="dpad-up" class="dpad-btn" aria-label="위">▲</button>
          <div class="dpad-spacer"></div>
        </div>
        <div class="dpad-row-middle">
          <button id="dpad-left" class="dpad-btn" aria-label="왼쪽">◀</button>
          <button id="dpad-down" class="dpad-btn" aria-label="아래">▼</button>
          <button id="dpad-right" class="dpad-btn" aria-label="오른쪽">▶</button>
        </div>
        <div class="action-row">
          <button id="btn-levels" class="action-btn">
            <span>☰</span> 레벨
          </button>
          <button id="btn-restart-2" class="action-btn" onclick="game._restartLevel()">
            <span>↺</span> 재시작
          </button>
        </div>
      </div>
    </div>

    <!-- ════════════ VICTORY SCREEN ════════════ -->
    <div id="victory-screen" class="screen overlay-screen hidden">
      <div class="victory-icon">🎉</div>
      <div class="victory-title">레벨 클리어!</div>

      <div class="victory-stats">
        <div class="stat-row">
          <span class="stat-label">레벨</span>
          <span class="stat-value" id="victory-level-num">1</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">이동수</span>
          <span class="stat-value" id="victory-moves">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">최고 기록</span>
          <span class="stat-value" id="victory-best">0</span>
          <span id="new-best-badge" class="new-best-badge" style="display:none;">NEW BEST</span>
        </div>
      </div>

      <div class="victory-buttons">
        <button id="btn-next-level" class="btn btn-primary">
          <span class="btn-icon">▶</span>
          다음 레벨
        </button>
        <button id="btn-victory-restart" class="btn">
          <span class="btn-icon">↺</span>
          다시 하기
        </button>
        <button id="btn-victory-levels" class="btn btn-ghost">
          <span class="btn-icon">☰</span>
          레벨 선택
        </button>
      </div>
    </div>

    <!-- ════════════ ALL CLEAR SCREEN ════════════ -->
    <div id="allclear-screen" class="screen overlay-screen hidden">
      <div class="allclear-icon">🏆</div>
      <div class="allclear-title">ALL CLEAR!</div>
      <p class="allclear-sub">
        모든 레벨을 클리어했습니다!<br />
        정말 대단해요! 🎊
      </p>
      <div style="display:flex;flex-direction:column;gap:10px;width:100%;max-width:280px;margin-top:8px;">
        <button id="btn-allclear-levels" class="btn btn-primary">
          <span class="btn-icon">↺</span>
          레벨 다시 보기
        </button>
        <button id="btn-allclear-menu" class="btn btn-ghost">
          처음으로
        </button>
      </div>
    </div>

  </div>

  <script src="js/game.js"></script>
</body>
</html>
